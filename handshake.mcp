handshake {
	sb {
		start {
			id : varint; id=0x00;
			version : varint;
			address : string;
			port : ushort;
			target : varint;
		}
	}
}

status {
	sb {
		id : varint;

		request {
			id=0x00;
		};

		ping {
			id=0x01;
			timestamp : long;
		}
	}

	cb {
		id : varint;

		response {
			id=0x00
			status : string;
		}

		pong {
			id = 0x01;
			timestamp : long;
		}
	}
}

login {
	sb {
		id : varint;

		start {
			 id=0x00;
			username : string;
		}

		response {
			id=0x01;
			secret, token : bytes;
		}
	}

	cb {
		id : varint;

		kick {
			id=0x00;
			reason : string;
		}

		request {
			id=0x01;
			server_id : string;
			pubkey, token : bytes;
		}

		success {
			id=0x02;
			uuid : uuid_string;
			username : string;
		}

		compression {
			id=0x03;
			threshold : varint;
		}
	}
}
